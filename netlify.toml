[build]
  command = "npx prisma generate && npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "20"
  # Exclude NEXT_PUBLIC_ vars and NEXTAUTH_URL from secrets scanning - they are intentionally public/inlined
  SECRETS_SCAN_OMIT_KEYS = "NEXT_PUBLIC_APP_URL,NEXT_PUBLIC_APP_ENV,NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY,NEXTAUTH_URL"

[[plugins]]
  package = "@netlify/plugin-nextjs"
